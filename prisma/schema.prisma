generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model users {
  id                      String    @id @default(uuid()) @db.Uuid
  email                   String?
  name                    String?
  business_name           String?
  business_number         String?
  business_name_updated   Boolean?  @default(false)
  business_number_updated Boolean?  @default(false)
  phone                   String?
  role                    String?   @default("user")
  terms_agreed_at         DateTime? @db.Timestamptz(6)
  privacy_agreed_at       DateTime? @db.Timestamptz(6)
  created_at              DateTime  @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  orders                  orders[]
}

model orders {
  id               String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id          String?  @db.Uuid
  items            Json
  service_items    Json?
  total_boxes      Int
  total_amount     Int
  delivery_address String
  status           String?  @default("pending")
  created_at       DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  user             users?   @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model products {
  id             String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name           String
  price          Int
  category       String   @default("SODA")
  image          String?
  is_pepsi_family Boolean @default(false)
  created_at     DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at     DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
}
